---
import Layout from "../../layouts/Layout.astro"
import { getCollection } from "astro:content";

const posts = await getCollection('blog');
posts.sort((a,b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());
---
<Layout title="Blog">
    <h1>Blog</h1>
    <ul>    
        {posts.map(post => (
            <li>
                <a href={`/blog/${post.slug}/`}>
                    <h2>{post.data.title}</h2>
                    <p>{post.data.pubDate.toDateString()}</p>
                </a>
            </li>
        ))}
    </ul>
</Layout>